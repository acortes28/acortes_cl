{% extends "base.html" %}
{% load static %}

{% block title %}Mis Habilidades{% endblock %}

{% block content %}
<section class="skills-section">
    <div class="container">
        <h1>Mis Habilidades y Tecnologías</h1>
        
        <div class="skills-categories">
            <div class="category-card">
                <h2><i class="fas fa-file-alt"></i> Ofimática</h2>
                <div class="skills-list">
                    <div class="skill-item">
                        <span class="skill-name">Excel</span>
                        <div class="skill-bar">
                            <div class="skill-level" style="width:100%;"></div>
                        </div>
                    </div>
                    <div class="skill-item">
                        <span class="skill-name">Power Point</span>
                        <div class="skill-bar">
                            <div class="skill-level" style="width: 100%;"></div>
                        </div>
                    </div>
                    <div class="skill-item">
                        <span class="skill-name">Word</span>
                        <div class="skill-bar">
                            <div class="skill-level" style="width: 90%;"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="category-card">
                <h2><i class="fas fa-project-diagram"></i> Modelamiento</h2>
                <div class="skills-list">
                    <div class="skill-item">
                        <span class="skill-name">BPMN</span>
                        <div class="skill-bar">
                            <div class="skill-level" style="width:90%;"></div>
                        </div>
                    </div>
                    <div class="skill-item">
                        <span class="skill-name">ER</span>
                        <div class="skill-bar">
                            <div class="skill-level" style="width: 80%;"></div>
                        </div>
                    </div>
                    <div class="skill-item">
                        <span class="skill-name">UML</span>
                        <div class="skill-bar">
                            <div class="skill-level" style="width: 60%;"></div>
                        </div>
                    </div>
                </div>
            </div>
               
            <div class="category-card">
                <h2><i class="fas fa-language"></i> Idiomas</h2>
                <div class="skills-list">
                    <div class="skill-item">
                        <span class="skill-name">Español</span>
                        <div class="skill-bar">
                            <div class="skill-level" style="width:100%;"></div>
                        </div>
                    </div>
                    <div class="skill-item">
                        <span class="skill-name">Inglés</span>
                        <div class="skill-bar">
                            <div class="skill-level" style="width: 55%;"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="category-card">
                <h2><i class="fas fa-database"></i> Bases de Datos</h2>
                <div class="skills-list">
                    <div class="skill-item">
                        <span class="skill-name">PostgreSQL</span>
                        <div class="skill-bar">
                            <div class="skill-level" style="width: 80%;"></div>
                        </div>
                    </div>
                    <div class="skill-item">
                        <span class="skill-name">SQLServer</span>
                        <div class="skill-bar">
                            <div class="skill-level" style="width: 50%;"></div>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="category-card">
                <h2><i class="fas fa-code"></i> Programación</h2>
                <div class="skills-list">
                    <div class="skill-item">
                        <span class="skill-name">Python</span>
                        <div class="skill-bar">
                            <div class="skill-level" style="width:80%;"></div>
                        </div>
                    </div>
                    <div class="skill-item">
                        <span class="skill-name">VBA</span>
                        <div class="skill-bar">
                            <div class="skill-level" style="width: 70%;"></div>
                        </div>
                    </div>
                    <div class="skill-item">
                        <span class="skill-name">Java</span>
                        <div class="skill-bar">
                            <div class="skill-level" style="width: 10%;"></div>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="category-card">
                <h2><i class="fas fa-globe"></i> Desarrollo Web</h2>
                <div class="skills-list">
                    <div class="skill-item">
                        <span class="skill-name">Django</span>
                        <div class="skill-bar">
                            <div class="skill-level" style="width: 25%;"></div>
                        </div>
                    </div>
                    <div class="skill-item">
                        <span class="skill-name">JavaScript</span>
                        <div class="skill-bar">
                            <div class="skill-level" style="width: 15%;"></div>
                        </div>
                    </div>
                    <div class="skill-item">
                        <span class="skill-name">HTML/CSS</span>
                        <div class="skill-bar">
                            <div class="skill-level" style="width: 15%;"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="certifications">
            <h2><i class="fas fa-certificate"></i> Certificaciones</h2>
            <div class="certs-grid">
                <div class="cert-card">
                    <h3>UML para analistas de negocio</h3>
                    <p>Udemy - Feb 2022</p>
                    <a href="#" class="cert-link" data-pdf-url="{% static 'files/uml_ba.pdf' %}">Ver credencial</a>
                </div>
                <div class="cert-card">
                    <h3>Business Model Canvas</h3>
                    <p>Platzi - Nov 2024</p>
                    <a href="#" class="cert-link" data-pdf-url="{% static 'files/canvas.pdf' %}">Ver credencial</a>
                </div>
                <div class="cert-card">
                    <h3>Transformación Digital para tu empresa</h3>
                    <p>Platzi - Oct 2024</p>
                    <a href="#" class="cert-link" data-pdf-url="{% static 'files/td_empresas.pdf' %}">Ver credencial</a>
                </div>
                <div class="cert-card">
                    <h3>Análisis de negocios para ciencia de datos</h3>
                    <p>Platzi - Oct 2024</p>
                    <a href="#" class="cert-link" data-pdf-url="{% static 'files/ds_ba.pdf' %}">Ver credencial</a>
                </div>
                <div class="cert-card">
                    <h3>Curador de datos</h3>
                    <p>Fundación Carlos Slim - Jul 2021</p>
                    <a href="#" class="cert-link" data-pdf-url="{% static 'files/cur_data.pdf' %}">Ver credencial</a>
                </div>
                <div class="cert-card">
                    <h3>Administrador de bases de datos</h3>
                    <p>Fundación Carlos Slim - Jul 2021</p>
                    <a href="#" class="cert-link" data-pdf-url="{% static 'files/adm_bd.pdf' %}">Ver credencial</a>
                </div>
                <div class="cert-card">
                    <h3>Procedimientos almacenados en PostgreSQL (PL/pgSQL)</h3>
                    <p>Udemy - Nov 2024</p>
                    <a href="#" class="cert-link" data-pdf-url="{% static 'files/plpgsql.pdf' %}">Ver credencial</a>
                </div>
                <div class="cert-card">
                    <h3>Técnicas de resolución de problemas</h3>
                    <p>Centro de desarrollo y formación continua SpA - Oct 2024</p>
                    <a href="#" class="cert-link" data-pdf-url="{% static 'files/problem_solving.pdf' %}">Ver credencial</a>
                </div>
                <div class="cert-card">
                    <h3>Técnicas y estrategias de gestión de la innovación</h3>
                    <p>Centro de desarrollo Neotec SpA - Ago 2022</p>
                    <a href="#" class="cert-link" data-pdf-url="{% static 'files/innovacion.pdf' %}">Ver credencial</a>
                </div>
                <div class="cert-card">
                    <h3>Scrum Essentials</h3>
                    <p>Educación continua FCFM - Nov 2021</p>
                    <a href="#" class="cert-link" data-pdf-url="{% static 'files/scrum.pdf' %}">Ver credencial</a>
                </div>
            </div>
        </div>
    </div>
</section>



<!-- Modal para visualizar PDFs de certificaciones -->

<script>
// Script para el modal de certificaciones
document.addEventListener('DOMContentLoaded', function() {
    const certModal = document.getElementById('cert-modal');
    const certIframe = document.getElementById('cert-iframe');
    const certDownloadBtn = document.getElementById('cert-download-btn');
    const certCloseBtn = document.getElementById('cert-close-btn');
    const certViewerBtns = document.querySelectorAll('.cert-link');
    const certModalTitle = document.getElementById('cert-modal-title');
    const pdfLoading = document.getElementById('pdf-loading');
    
    let currentCertUrl = '';
    let currentCertTitle = '';
    
    // Abrir modal de certificaciones
    certViewerBtns.forEach(btn => {
        btn.addEventListener('click', function(e) {
            e.preventDefault();
            
            const pdfUrl = this.getAttribute('data-pdf-url');
            const certTitle = this.closest('.cert-card').querySelector('h3').textContent;
            
            currentCertUrl = pdfUrl;
            currentCertTitle = certTitle;
            
            // Configurar el título del modal
            certModalTitle.textContent = certTitle;
            
            // Mostrar indicador de carga
            pdfLoading.style.display = 'block';
            certIframe.style.display = 'none';
            
            // Configurar el iframe con parámetros para forzar visualización directa
            const pdfUrlWithParams = pdfUrl + '#toolbar=0&navpanes=0&scrollbar=0&view=FitH';
            certIframe.src = pdfUrlWithParams;
            
            // Mostrar el modal
            certModal.classList.add('show');
            document.body.style.overflow = 'hidden';
            
            // Ocultar indicador de carga cuando el PDF esté listo
            certIframe.onload = function() {
                pdfLoading.style.display = 'none';
                certIframe.style.display = 'block';
            };
            
            // Manejar errores de carga del PDF
            certIframe.onerror = function() {
                console.log('Error loading PDF, trying alternative method');
                pdfLoading.style.display = 'none';
                // Fallback: abrir en nueva pestaña
                window.open(pdfUrl, '_blank');
                closeCertModal();
            };
        });
    });
    
    // Cerrar modal de certificaciones
    function closeCertModal() {
        certModal.classList.remove('show');
        document.body.style.overflow = '';
        certIframe.src = '';
        certIframe.style.display = 'block';
        pdfLoading.style.display = 'none';
        currentCertUrl = '';
        currentCertTitle = '';
    }
    
    // Eventos para cerrar el modal de certificaciones
    certCloseBtn.addEventListener('click', closeCertModal);
    
    // Cerrar con ESC
    document.addEventListener('keydown', function(e) {
        if (e.key === 'Escape' && certModal.classList.contains('show')) {
            closeCertModal();
        }
    });
    
    // Cerrar haciendo clic fuera del modal
    certModal.addEventListener('click', function(e) {
        if (e.target === certModal) {
            closeCertModal();
        }
    });
    
    // Descargar certificación
    certDownloadBtn.addEventListener('click', function() {
        if (currentCertUrl) {
            const link = document.createElement('a');
            link.href = currentCertUrl;
            link.download = currentCertTitle.replace(/[^a-z0-9]/gi, '_').toLowerCase() + '.pdf';
            link.target = '_blank';
            
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
            
            this.style.transform = 'scale(0.8)';
            setTimeout(() => {
                this.style.transform = 'scale(1)';
            }, 200);
        }
    });
});
</script>

{% endblock %}

{% block modal %}
<div id="cert-modal" class="pdf-modal">
    <div class="pdf-modal-content">
        <div class="pdf-modal-header">
            <h3 id="cert-modal-title">Certificación</h3>
            <div class="pdf-modal-actions">
                <button class="pdf-download-btn" id="cert-download-btn" title="Descargar PDF">
                    <i class="fas fa-download"></i>
                </button>
                <button class="pdf-close-btn" id="cert-close-btn">
                    <i class="fas fa-times"></i>
                </button>
            </div>
        </div>
        <div class="pdf-modal-body">
            <div id="pdf-loading" style="display: none; text-align: center; padding: 50px; color: var(--text-color);">
                <i class="fas fa-spinner fa-spin" style="font-size: 2rem; margin-bottom: 20px;"></i>
                <p>Cargando PDF...</p>
            </div>
            <iframe id="cert-iframe" src="" frameborder="0" type="application/pdf"></iframe>
        </div>
    </div>
</div>

{% endblock %}

